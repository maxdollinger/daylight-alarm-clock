(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),o=a(10),l=(a(104),a(170)),s=a(171),u=a(172),m=a(83),d=a(4),f=a(176),p=Object(d.a)(function(e){return{root:{width:48,height:26,padding:0,margin:e.spacing(1),overflow:"visible"},switchBase:{padding:1,"&$checked":{transform:"translateX(22px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}})(function(e){var t=e.classes,a=Object(m.a)(e,["classes"]);return r.a.createElement(f.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))}),b=a(29),g=a(45),h=a.n(g),x=a(58),E=window.location.hostname.includes("local")?":8000":"",v="http://".concat(window.location.hostname).concat(E,"/api"),j=function(e){return Object(x.a)(h.a.mark(function t(){var a,n,r=arguments;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"GET",n=r.length>1&&void 0!==r[1]?r[1]:"","GET"!==a){t.next=6;break}return t.next=5,window.fetch(new Request(v+e+n,{method:a}));case 5:return t.abrupt("return",t.sent.json());case 6:if("POST"!==a&&"PUT"!==a){t.next=11;break}return n=n||{},t.next=10,window.fetch(new Request(v+e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));case 10:return t.abrupt("return",t.sent.json());case 11:case"end":return t.stop()}},t)}))},O={led:j("/led"),alarm:j("/alarm"),sleepTimer:j("/sleep-timer")},y=function(e,t){return function(a,n){return function(){var r=Object(x.a)(h.a.mark(function r(c,i){var o;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O[e](a,n);case 2:o=r.sent.data,"GET"===a&&c(t(o));case 4:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()}},w=Object(b.b)({name:"alarm",initialState:{status:"off",time:Date.now(),fading:20},reducers:{setAlarm:function(e,t){return t.payload},setTime:function(e,t){e.time=t.payload,e.status="on"}}}),T=y("alarm",w.actions.setAlarm),k=w.reducer,N=Object(l.a)(function(){return{root:{textAlign:"right",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},col:{display:"flex"}}});function S(){var e=N(),t=Object(o.b)(),a=Object(o.c)(function(e){return e.alarm.status});return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.col},"Alarm"),r.a.createElement("div",{className:e.col},r.a.createElement(p,{onChange:function(){t(T("PUT"))},checked:!("off"===a)})))}var C=a(82),D=a(174),L=Object(l.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",width:"160px",marginLeft:"20px"}}});function P(){var e=L(),t=Object(o.b)(),a=Object(o.c)(function(e){return new Date(e.alarm.time).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})});return r.a.createElement("form",{className:e.container,noValidate:!0},r.a.createElement(D.a,{id:"time",type:"time",value:a,onChange:function(e){var a,n=e.target.value.split(":"),r=(a=new Date).setHours.apply(a,Object(C.a)(n));t(T("POST",{time:r}))},InputLabelProps:{shrink:!0},inputProps:{step:"300"}}))}var A=Object(l.a)(function(){return{root:{marginTop:"20px",marginBottom:"5px"}}});function I(){var e=A();return r.a.createElement(u.a,{container:!0,className:e.root},r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(S,null)),r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(P,null)))}var B=a(38),G=a(173),V=a(175),W=Object(l.a)(function(){return{time:{textAlign:"center",padding:"10px",fontSize:"1.5rem",fontWeight:"bold"},date:{textAlign:"right"}}}),R={weekday:"long",month:"numeric",day:"numeric",year:"numeric"};function U(e){return r.a.createElement(V.a,{position:"relative",display:"inline-flex"},r.a.createElement(G.a,Object.assign({size:85,style:{color:e.c},variant:"determinate"},e)),r.a.createElement(V.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},"".concat(e.time.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}))))}var $=function(e){return(60*e.getHours()+e.getMinutes())/1440*100};function H(){var e=W(),t=Object(n.useState)(new Date(Date.now())),a=Object(B.a)(t,2),c=a[0],i=a[1],l=Object(o.c)(function(e){return e.alarm.status});return Object(n.useEffect)(function(){var e=setInterval(function(){return i(new Date(Date.now()))},1e3);return function(){return clearInterval(e)}},[]),r.a.createElement(u.a,{container:!0},r.a.createElement(u.a,{item:!0,xs:12,className:e.date},c.toLocaleDateString("de-DE",R)),r.a.createElement(u.a,{item:!0,xs:12,className:e.time},r.a.createElement(U,{value:$(c),c:"off"===l?"#dddddd":"#f05454",time:c})))}var J=a(177),M=Object(b.b)({name:"led",initialState:{status:"off",brightness:0},reducers:{setLed:function(e,t){var a=t.payload.pwm;e.brightness=Math.round(a/255*100),e.status=0===a?"off":"on"}}}),q=function(e){return e.led.brightness},z=y("led",M.actions.setLed),X=M.reducer,F=Object(l.a)({root:{display:"flex",height:"100%",marginLeft:"20px"},slider:{display:"flex",maxWidth:"350px"}});function K(){var e=F(),t=Object(o.b)(),a=Object(o.c)(q),c=Object(n.useState)(a),i=Object(B.a)(c,2),l=i[0],s=i[1];return Object(n.useEffect)(function(){s(a)},[a]),r.a.createElement("div",{className:e.root},r.a.createElement(J.a,{onChangeCommitted:function(e,a){t(z("POST",{brightness:a=a/100*255}))},onChange:function(e,t){return s(t)},value:l,valueLabelDisplay:"auto",step:1,min:0,max:100,className:e.slider}))}var Q=Object(l.a)(function(){return{root:{textAlign:"right",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},col:{display:"flex"}}});function Y(){var e=Q(),t=Object(o.b)(),a=Object(o.c)(function(e){return e.led.brightness});return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.col},"LED"),r.a.createElement("div",{className:e.col},r.a.createElement(p,{onChange:function(){t(z("PUT"))},checked:a>0})))}var Z=Object(l.a)(function(){return{root:{marginTop:"20px",marginBottom:"5px"}}});function _(){var e=Z();return r.a.createElement(u.a,{container:!0,className:e.root},r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(Y,null)),r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(K,null)))}var ee=Object(b.b)({name:"sleepTimer",initialState:{status:"off",time:30,fading:10},reducers:{setSleepTimer:function(e,t){var a=t.payload,n=a.time,r=a.status,c=a.fading;e.time=n/6e4,e.status=r,e.fading=c/6e4}}}),te=y("sleepTimer",ee.actions.setSleepTimer),ae=ee.reducer,ne=Object(l.a)(function(){return{root:{textAlign:"right",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},col:{display:"flex"}}});function re(){var e=ne(),t=Object(o.b)(),a=Object(o.c)(function(e){return e.sleepTimer.status});return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.col},"Sleep Timer"),r.a.createElement("div",{className:e.col},r.a.createElement(p,{onChange:function(){t(te("PUT"))},checked:!("off"===a)})))}var ce=Object(l.a)({root:{display:"flex",height:"100%",marginLeft:"20px"},slider:{display:"flex",maxWidth:"350px"}});function ie(){var e=ce(),t=Object(o.b)(),a=Object(o.c)(function(e){return e.sleepTimer.time}),c=Object(o.c)(function(e){return e.sleepTimer.fading}),i=Object(n.useState)(a),l=Object(B.a)(i,2),s=l[0],u=l[1];return Object(n.useEffect)(function(){u(a)},[a]),r.a.createElement("div",{className:e.root},r.a.createElement(J.a,{onChangeCommitted:function(e,a){t(te("POST",{time:a*=6e4}))},onChange:function(e,t){return u(t)},value:s,valueLabelDisplay:"auto",step:1,min:c,max:90,className:e.slider}))}var oe=Object(l.a)(function(){return{root:{marginTop:"20px",marginBottom:"5px"}}});function le(){var e=oe();return r.a.createElement(u.a,{container:!0,className:e.root},r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(re,null)),r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(ie,null)))}var se=a(81),ue=Object(b.a)({reducer:{led:X,alarm:k,sleepTimer:ae}}),me=Object(se.io)();me.on("led",function(e){return ue.dispatch({type:"led/setLed",payload:e})}),me.on("alarm",function(e){return ue.dispatch({type:"alarm/setAlarm",payload:e})}),me.on("sleepTimer",function(e){return ue.dispatch({type:"sleepTimer/setSleepTimer",payload:e})});var de=Object(l.a)(function(){return{root:{maxHeight:"600px",width:"90%",maxWidth:"600px",margin:"auto",padding:"15px"}}});var fe=function(){var e=de(),t=Object(o.b)();return Object(n.useEffect)(function(){console.log("hi"),t(z("GET")),t(T("GET")),t(te("GET"))},[]),r.a.createElement(s.a,{elevation:4,className:e.root},r.a.createElement(H,null),r.a.createElement(_,null),r.a.createElement(I,null),r.a.createElement(le,null))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:ue},r.a.createElement(fe,null))),document.getElementById("root"))},93:function(e,t,a){e.exports=a(135)}},[[93,1,2]]]);
//# sourceMappingURL=main.34d43f78.chunk.js.map